<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>购物车页</title>
    <link rel="stylesheet" href="../dist/shopping.min.css">
    <link rel="stylesheet" href="../dist/index.min.css">
</head>
<body>
    <!-- 头部 -->
    <div class = "top">
        <div class = "top1">
            <p>您好！11***82526@qq.com <span>0积分</span> <a href="header.html">退出</a> </p>
        </div>
    <!-- 头部菜单选择栏 -->
    <div class = "list">
            <ul>
                <li><a href=""><img src="../images/-5.gif" alt="">我的账户<img src="../images/-1.gif" alt=""></a></li>
                <li><a href=""><img src="../images/-2.gif" alt="">我的购物车</a></li>
                <li><a href=""><img src="../images/-6.gif" alt="">我的收藏</a></li>
                <li><a href="">我的站内信</a></li>
                <li><a href="">积分中心</a></li>
                <li><a href="">Global site</a></li>
                <li><a href="">关注我们<img src="../images/-3.gif" alt=""><img src="../images/-4.gif" alt=""></a></li>
            </ul>
        </div>
    </div>
    </div>
    <!-- 侧面购物车 -->
    <div class = "shopping">
        <ul>
            <li><a href=""><img src="../images/g1.gif" alt=""></a></li>
            <li><a href=""><img src="../images/g2.gif" alt="">
                购<br>物<br>车
                <img src="../images/g3.gif" alt=""></a></li>
            <li><a href=""><img src="../images/g4.gif" alt=""></a></li>
            <li><a href=""><img src="../images/g5.gif" alt=""></a></li>
            <li><a href="">TOP</a></li>
        </ul>
    </div>
    <!-- logo部分 -->
   <div class = "logo logo1">
        <div class = "img">
            <img src="../images/-7.gif" alt="">
        </div>
        <div class = "img1">
            <img src="../images/sh1.gif" alt="" class = "img2">
            <img src="../images/sh2.gif" alt="" class = "img3">
        </div>
    </div>
    <!-- 结账提示 -->
    <div class = "prompt">
        &nbsp;&nbsp;保送仓商品结账提示&nbsp;1.保送仓商品结保送仓商品结保送仓商品结;2.保送仓商品结保送仓商品结保送仓商品结
    </div>
    <!-- 您购物车中的商品 -->
    <div class = "goods">
        <img src="../images/sh4.gif" alt="">
        <div class = "ps"><p>保税仓直送商品订单满<span>￥168</span>包邮</p></div>
    </div>
    <!-- 加入的商品 -->

    <div class = "add">
        <div class = "add1"><input type="checkbox" name="qx" />保税仓直售商铺&nbsp;&nbsp;&nbsp;商品名称</div>

         <div class="cartList">
                <ul class="cartHead">
                    <li>商品图片</li>
                    <li>商品名称</li>
                    <li>单价</li>
                    <li>数量</li>
                    <li>小计</li>
                    <li>操作</li>
                </ul>
            <div class="blank">
                    您的购物车空空如也~~
            </div>
     </div>


        <div class = "add2">
           <!--  <ul>
                <li><input type="checkbox" name="hobby"/></li>
                <li><img src="../img/17.gif" alt=""></li>
                <li><p>SNP 精华面膜系列</p></li>
                <li>65RMD</li>
                <li>10片</li>
                <li>65RAM</li>
                <li>删除</li>
            </ul> -->
        </div>
    </div>
    <!-- 优惠项目 -->
    <div class = "projest">&nbsp;已享受的优惠&nbsp;&nbsp;&nbsp;优惠项目</div>
    <!-- 结账 -->
    <div class = "sum">&nbsp;<i><a href="second1.html">继续购物</a></i> &nbsp;&nbsp;&nbsp; <i class = "clear">清空购物车</i>
        <button>结账</button>
        <span>共0件产品  商品应付金额<i>￥0.0</i></span>

    </div>


    <!-- 付款方式 -->
     <div class = "pay">
        <div class = "pay1">
            <ul>
                <li><a href="">新手上路</a></li>
                <li><a href="">常见问题</a></li>
                <li><a href="">购物流程</a></li>
                <li><a href="">优惠卷说明</a></li>
                <li><a href="">联络我们</a></li>
                <li><a href="">常见问题</a></li>
            </ul>
            <ul>
                <li><a href="">新手上路</a></li>
                <li><a href="">常见问题</a></li>
                <li><a href="">购物流程</a></li>
                <li><a href="">优惠卷说明</a></li>
                <li><a href="">联络我们</a></li>
                <li><a href="">常见问题</a></li>
            </ul>
            <ul>
                <li><a href="">新手上路</a></li>
                <li><a href="">常见问题</a></li>
                <li><a href="">购物流程</a></li>
                <li><a href="">优惠卷说明</a></li>
                <li><a href="">联络我们</a></li>
                <li><a href="">常见问题</a></li>
            </ul>
            <ul>
                <li><a href="">新手上路</a></li>
                <li><a href="">常见问题</a></li>
                <li><a href="">购物流程</a></li>
                <li><a href="">优惠卷说明</a></li>
                <li><a href="">联络我们</a></li>
                <li><a href="">常见问题</a></li>
            </ul>
            <ul>
                <li><a href="">新手上路</a></li>
                <li><a href="">常见问题</a></li>
                <li><a href="">购物流程</a></li>
                <li><a href="">优惠卷说明</a></li>
                <li><a href="">联络我们</a></li>
                <li><a href="">常见问题</a></li>
            </ul>
        </div>
        <div class = "pay2"><img src="../images/pay.gif" alt=""></div>
    </div>
    <!-- 底部 -->
    <div class = "footer">
        <ul>
            <li><a href="">关于莎莎</a></li>
            <li><a href="">使用条款</a></li>
            <li><a href="">隐私策略</a></li>
            <li><a href="">批发服务</a></li>
            <li><a href="">招商合作</a></li>
            <li><a href="">帮助中心</a></li>
            <li><a href="">人才招聘</a></li>
            <li><a href="">联络我们</a></li>
            <li><a href="">港澳店铺</a></li>
            <li><a href="">其他地区</a></li>
        </ul>
        <div class = "footer1">Copyright 2000-2018 Sa Sa dot Com Limited版权所有莎莎国际控股有限公司成员</div>
    </div>
</body>
</html>
<script src = ../dist/index.min.js></script>
<script>
    //checked
    //找到全选复选框
    var qxObj = document.getElementsByName("qx")[0];
    var cks = document.getElementsByName("hobby");
    qxObj.onclick = function(){
        //让后面操作的复选框的 checked值 和当前点击的复选框的checked值保持一致
        //alert( qxObj.checked );
        for( var i = 0 ; i < cks.length ; i++ ){
            cks[i].checked = this.checked;
        }
    }

    // 购物车
            $(function(){
                let cookieStr = $.cookie('shasha') ? $.cookie('shasha') : "";
                if(!cookieStr){
                    $('.blank').css('display','block');
                }else{
                    let cookieObj = convertCookieStrToCookieObj(cookieStr);
                    for(var key in cookieObj){
                        let good = cookieObj[key];
                        let str = `
                            <ul class = "goodInfo" data-good-id = "${key}">
                                <li><input type="checkbox" name="hobby"/></li>
                                <li><img src="${good.src}" alt=""></li>
                                <li><p>${good.name}</p></li>
                                <li>${good.price}</li>
                                <li class="num3">
                                    <a href="javascript:;" class="minus">-</a>
                                    <input type="text" name="" id="num3" value="${good.num}" />
                                    <a href="javascript:;" class="plus">+</a>
                                </li>
                                <li>${good.price * good.num}</li>
                                <li class="del">删除</li>
                            </ul>
                        `;
                        $('.add2').append(str);

                    }
                    //删除
                    let $dels = $('.goodInfo .del');
                    let $sdel = $(".clear");
                    // console.log($dels);
                    $dels.each(function(){
                        $(this).click(function(){
                            let id = $(this).parents('.goodInfo').remove().attr('data-good-id');
                            // alert(id);
                            let cookieStr = $.cookie('shasha')?$.cookie('shasha') : "";
                            let cookieObj = convertCookieStrToCookieObj(cookieStr);
                            //删除对象中指定key的value
                            delete cookieObj[id];
                            $.cookie('shasha',JSON.stringify(cookieObj),{expires : 7,path : '/'})
                        })
                    })
                    // 清空购物车所有商品
                    $sdel.click(function(){
                        $.cookie('shasha',JSON.stringify(cookieObj),{expires : -1,path : '/'});
                        window.location.reload();
                    })
                    //加号
                    let plus = $('.goodInfo .plus');
                    plus.each(function(){
                        $(this).click(function(){
                            let id = $(this).parents('.goodInfo').attr('data-good-id');
                            var cookieStr = $.cookie('shasha')?$.cookie('shasha'):"";
                            var cookieObj = convertCookieStrToCookieObj(cookieStr);
                            cookieObj[id].num ++;
                            $.cookie('shasha',JSON.stringify(cookieObj),{expires : 7,path : '/'});
                            //文本框
                            $(this).prev().val(cookieObj[id].num);
                            console.log( $(this).prev().val(cookieObj[id].num));
                            //合计
                            $(this).parent().next().html(cookieObj[id].num * cookieObj[id].price);
                        })
                    })
                    // 减号
                    let minus = $('.goodInfo .minus');
                    minus.each(function(){
                        $(this).click(function(){
                            let id = $(this).parents('.goodInfo').attr('data-good-id');
                            // let price = $(this).parents('.goodInfo').prev('li').html;
                            var cookieStr = $.cookie('shasha')?$.cookie('shasha'):"";
                            var cookieObj = convertCookieStrToCookieObj(cookieStr);
                            if(cookieObj[id].num === 1){
                                cookieObj[id].num = 1;
                           }else{
                            cookieObj[id].num --;
                           }
                            $.cookie('shasha',JSON.stringify(cookieObj),{expires : 7,path : '/'});
                            //文本框
                            $(this).next().val(cookieObj[id].num);
                            // alert(cookieObj[id].num);

                            //合计
                            $(this).parent().next().html(cookieObj[id].num * cookieObj[id].price);
                        })
                    })
                }
            })
            function convertCookieStrToCookieObj(str){
                if(!str){
                    return {};
                }
                return JSON.parse(str);
            }

</script>