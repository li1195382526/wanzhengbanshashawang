<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登陆页</title>
    <link rel="stylesheet" href="../dist/index.min.css">
    <link rel="stylesheet" href="../dist/register.min.css">
    <link rel="stylesheet" href="../dist/login.min.css">
</head>
<body>
     <div class = "header">
        <div class = "login">
            <p>欢迎光临莎莎网！</p>
            <div class = "login1">
                <a href="login.html">登录</a>
                <p>或</p>
                <a href="register.html">免费注册</a>
            </div>
        </div>
        <div class = "list">
            <ul>
                <li><a href=""><img src="../images/-5.gif" alt="">我的账户<img src="../images/-1.gif" alt=""></a></li>
                <li><a href=""><img src="../images/-2.gif" alt="">我的购物车</a></li>
                <li><a href=""><img src="../images/-6.gif" alt="">我的收藏</a></li>
                <li><a href="">我的站内信</a></li>
                <li><a href="">积分中心</a></li>
                <li><a href="">Global site</a></li>
                <li><a href="">关注我们<img src="../images/-3.gif" alt=""><img src="../images/-4.gif" alt=""></a></li>
            </ul>
        </div>
    </div>
    <div class = "logo">
        <div class = "img">
            <img src="../images/-7.gif" alt="">
        </div>
    </div>
    <div class = "register">
        <div class = "images">
            <img src="../images/login.gif" alt="">
        </div>
        <div class = "box">
            <div class = "box1">
                <h3>登录账号</h3>
                <p>已有莎莎账号？</p>
                <p class = "box2">立即注册</p>
            </div>
            <div class = "msg">
                <form action="login.php" method="post">
                    <input type="text" placeholder = "邮箱/手机" name="uname" id="uname"><br>
                    <input type="text" placeholder = "填写密码" name="upwd" id="upwd"><br>
                    <input type="text" placeholder = "填写验证码" class = "test" id = "test">
                <div class = "test1" id = "test1" >sasds</div><span id = "span">看不清换一张图</span>
            </div>
            <div class = "change">
                <input type="radio" name = "agree"><span>记住我</span><i>忘记密码</i><br>
            </div>
            <input type="button" class = "reg" value = "登录" id = "submit">
            <!-- <div class = "reg">登录</div> -->
        </form>
            <div class = "third">
                <h4>第三方账号登录</h4>
               <ul>
                   <li><a href=""><img src="../images/p1.gif" alt="">QQ登录</a></li>
                   <li><a href=""><img src="../images/p2.gif" alt="">微博登录</a></li>
                   <li><a href=""><img src="../images/p3.gif" alt="">支付宝登录</a></li>
               </ul>
            </div>
        </div>
    </div>
</body>
</html>
<script src = "../dist/index.min.js"></script>
<script>
    //随机验证码
        var oSpan = document.getElementById("span");
        var oTest1 = document.getElementById("test1");
        oSpan.onclick = function(){
            oTest1.innerHTML = testCode(5);
        }
                function testCode(n){
                var arr = [];
                for(var i = 0; i < n; i++){
                    //1、随机0~99的数
                    var num = parseInt(Math.random() * 100);
                    if(num >= 0 && num <= 9){
                        arr.push(num);
                    }else if(num >= 65 && num <= 90){
                        arr.push(String.fromCharCode(num));
                    }else if(num >= 27 && num <= 52){
                        arr.push(String.fromCharCode(num + 70));
                    }else{
                        //没用的数
                        i--;
                    }
                }
                // alert(arr);
                return arr.join("");
            }
//判断验证码是否填写
        var ffff = false;
        var oTest = document.getElementById("test");
        oTest.onblur = function(){
        if(oTest.value == oTest1.innerHTML){
            ffff = true;
            console.log("验证码输入正确");
         }else{
            oTest.value = "验证码有误";
            oTest.style.color = "red";
         }
        }
        var oInput = document.getElementById("uname");
        var oUpwd = document.getElementById("upwd");
         var oSubmit = document.getElementById("submit");
            oSubmit.onclick = function(){

             if(oTest.value == ""){
            alert("请填写信息")
            }
            // console.log(ffff)
            if(ffff){

                $.ajax({
                    // alert("ssss"),
                    type : "post",
                    url : "login.php",
                    data : {
                        "uname" : oInput.value,
                        "upwd" : oInput.value
                    },
                    success : function(data){
                        alert(data);
                        location.href = 'header.html';
                    }
                });
            }else{
                alert("输入信息有误");
            }

         }
</script>